[[local|localrc]]
SCREEN_LOGDIR=/opt/stack/log
LOGFILE=stack.sh.log
LOG_COLOR=False
#OFFLINE=True
RECLONE=yes

GIT_BASE=https://git.openstack.org
MY_BRANCH=<%= @MY_BRANCH %>
KEYSTONE_BRANCH=$MY_BRANCH
NOVA_BRANCH=$MY_BRANCH
NEUTRON_BRANCH=$MY_BRANCH
SWIFT_BRANCH=$MY_BRANCH
GLANCE_BRANCH=$MY_BRANCH
CINDER_BRANCH=$MY_BRANCH
HEAT_BRANCH=$MY_BRANCH
TROVE_BRANCH=$MY_BRANCH
HORIZON_BRANCH=$MY_BRANCH

#VIRT_DRIVER=docker

HOST_IP_IFACE=eth1
HOST_IP=<%= @hosts['devstack-control']['ipaddress'] %>
HOST_NAME=<%= @hosts['devstack-control']['name'] %>
SERVICE_HOST=$HOST_IP
SERVICE_HOST_NAME=$HOST_NAME
#FLAT_INTERFACE=eth2
PUBLIC_INTERFACE=eth3
FIXED_RANGE=10.0.0.0/24
NETWORK_GATEWAY=10.0.0.1
FLOATING_RANGE=172.20.20.0/24
Q_FLOATING_ALLOCATION_POOL="start=172.20.20.101,end=172.20.20.200"
PUBLIC_NETWORK_GATEWAY=172.20.20.1
#EXT_GW_IP=172.20.20.1

Q_HOST=$SERVICE_HOST
MYSQL_HOST=$SERVICE_HOST
RABBIT_HOST=$SERVICE_HOST
GLANCE_HOSTPORT=$SERVICE_HOST:9292
KEYSTONE_AUTH_HOST=$SERVICE_HOST
KEYSTONE_SERVICE_HOST=$SERVICE_HOST

MYSQL_PASSWORD=mysql
RABBIT_PASSWORD=rabbit
QPID_PASSWORD=rabbit
SERVICE_TOKEN=service
SERVICE_PASSWORD=admin
ADMIN_PASSWORD=admin

enable_service rabbit
disable_service qpid
#disable_service rabbit
#enable_service qpid

enable_service n-cond
enable_service n-cpu
enable_service n-novnc
disable_service n-net
enable_service q-svc
# enable_service q-agt
enable_service q-dhcp
enable_service q-l3
enable_service q-meta
enable_service quantum
enable_service odl-compute

## F17-i386-cfntools
#IMAGE_URLS+=",https://onedrive.live.com/download?cid=28F8F701DC29E4B9&resid=28F8F701DC29E4B9%21233&authkey=AJ9Gy3liKGHrNS8"
## F17-x86_64-cfntools
#IMAGE_URLS+=",https://onedrive.live.com/download?cid=28F8F701DC29E4B9&resid=28F8F701DC29E4B9%21232&authkey=AGoBdLK8qQ2HTQY"
## F18-i386-cfntools
#IMAGE_URLS+=",https://onedrive.live.com/download?cid=28F8F701DC29E4B9&resid=28F8F701DC29E4B9%21231&authkey=AL14hReY_w7mEus"
## F18-x86_64-cfntools
#IMAGE_URLS+=",https://onedrive.live.com/download?cid=28F8F701DC29E4B9&resid=28F8F701DC29E4B9%21235&authkey=ANIhItDDzNDQk40"
## F19-x86_64-cfntools (root/1234)
#IMAGE_URLS+=",https://onedrive.live.com/download?cid=28F8F701DC29E4B9&resid=28F8F701DC29E4B9%21238&authkey=AG1Umnd9HM-vp-c"
## Ubuntu14.04-x86_64 (trusty-server-cloudimg-armhf-disk1.img) (root/1234)
IMAGE_URLS+=",https://onedrive.live.com/download?cid=28F8F701DC29E4B9&resid=28F8F701DC29E4B9%21234&authkey=AIm_f2wWDaX50xk"
## Ubuntu12.04-i386-heat-cfntools (root/1234)
#IMAGE_URLS+=",https://onedrive.live.com/download?cid=28F8F701DC29E4B9&resid=28F8F701DC29E4B9%21236&authkey=AOBZxIppSlW9i9k"
## Ubuntu12.04-x86_64-heat-cfntools (root/1234)
#IMAGE_URLS+=",https://onedrive.live.com/download?cid=28F8F701DC29E4B9&resid=28F8F701DC29E4B9%21237&authkey=APE6L043waMihF0"

# ODL WITH ML2
Q_PLUGIN=ml2
Q_ML2_PLUGIN_MECHANISM_DRIVERS=opendaylight,logger
ODL_MGR_IP=<%= @hosts['opendaylight-devstack']['ipaddress'] %>
Q_ML2_TENANT_NETWORK_TYPE=vxlan

ENABLE_TENANT_TUNNELS=True

[[post-config|/etc/neutron/plugins/ml2/ml2_conf.ini]]
[agent]
minimize_polling=True
[ovs]
local_ip=<%= @hosts[@hostname]['ipaddress_tun'] %>

[ml2_odl]
url=http://<%= @hosts['opendaylight-devstack']['ipaddress'] %>:8080/controller/nb/v2/neutron
username=admin
password=admin
